#mainform  = horizontal_simple_form_for([:admin, @item], :html => { class: 'form-horizontalc', :multipart => true }) do |f|    = render 'shared/form_errors', f: f    -#= image_tag picture_url_library_application(@item, :thumb)    = f.input :title    = f.input :name    -#= f.association :cluster    = f.input :cluster_id, :value => @cluster_id, :readonly => true    = f.input :pos, as: :integer    = f.input :enabled, as: :boolean    = f.input :content, as: :text, label: "Content", :rows => 16, :cols => 80, :data=>{}, input_html: {value: @item.content, class: 'form_input_content' }    %div{id: "content", class: '', data: {}}(style="width:100%; height: 600px; border: 2px #333333 solid;")    %br    = f.button :submit, :class => "btn btn-primary"= render 'js_ace':javascript    function init_editor(id){      //var editor = ace.edit("content");      var editor = ace.edit(id);      editor.setTheme("ace/theme/chrome");      editor.getSession().setMode("ace/mode/haml");      editor.getSession().setNewLineMode("windows");      editor.getSession().setTabSize(2);      return editor;    }    // init editors    var editor = init_editor("content");    $(document).ready(function() {      // set content from input to editor      $( "textarea.form_input_content" ).each(function( index ) {        var textarea = $(this);        textarea.hide();        editor.getSession().setValue(textarea.val());      });      // set content from editor back to input      $('#mainform form').submit(function(){        $( "textarea.form_input_content" ).each(function( index ) {          var textarea = $(this);          textarea.val(editor.getSession().getValue());        });      });    });